{% extends 'base.html.twig' %}

{% block title %}Gesti√≥n de Disputa | FriendlyCup{% endblock %}

{% block body %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">


<div class="wrapper-centro">
    

    <div class="contenedor-principal">
        
        <div class="caja-jugadores">
            <h3>{{ equipo1.nombre }}</h3>
            <ul class="lista-jugadores">
                {% for jugador in equipo1.jugadores %}
                    <li>üë§ {{ jugador.nombre }} <div class="d-flex justify-content-between align-items-center mb-2">
    <span></span>
    
    <button type="button" 
            class="btn btn-sm btn-outline-success" 
            data-bs-toggle="modal" 
            data-bs-target="#modalEvento" 
            data-jugador-id="{{ jugador.id }}"
            data-jugador-nombre="{{ jugador.nombre }}">
        <i class="fas fa-plus"></i> A√±adir Puntos
    </button>
</div></li>
                    {# Bot√≥n de a√±adir evento #}
        </li>
                {% else %}
                    <li class="text-muted">Sin jugadores</li>
                {% endfor %}
            </ul>
        </div>

        <div class="caja-formulario">
            <h1 class="titulo-seccion">Gestionar Disputa</h1>
            
            <form id="form-resultado">
                <div class="mb-4">
                    <label class="d-block text-white mb-2 fw-bold">Resultado</label>
                    <input type="text" name="resultado" class="form-control input-custom mx-auto" value="{{ disputa.resultado }}">
                </div>

                <div class="mb-5">
                    <label class="d-block text-white mb-2 fw-bold">Ganador</label>
                    <select name="ganador_id" class="form-select input-custom mx-auto">
                        <option value="">Empate</option>
                        <option value="{{ equipo1.id }}" {{ disputa.ganador and disputa.ganador.id == equipo1.id ? 'selected' : '' }}>
                            {{ equipo1.nombre }}
                        </option>
                        <option value="{{ equipo2.id }}" {{ disputa.ganador and disputa.ganador.id == equipo2.id ? 'selected' : '' }}>
                            {{ equipo2.nombre }}
                        </option>
                    </select>
                </div>

                <div class="d-flex flex-column align-items-center">
                    <button type="button" class="btn-enviar" onclick="guardarCambios({{ disputa.id }}, '{{ path('torneo', {'id': disputa.torneo.id}) }}')">Guardar</button>
                    <a href="{{ path('torneo', {'id': disputa.torneo.id}) }}" class="btn-cancelar">Cancelar</a>
                </div>
            </form>
        </div>

        <div class="caja-jugadores">
            <h3>{{ equipo2.nombre }}</h3>
            <ul class="lista-jugadores">
                {% for jugador in equipo2.jugadores %}
                    <li>üë§ {{ jugador.nombre }}
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span></span>
                            <button type="button" 
                                    class="btn btn-sm btn-outline-success" 
                                    data-bs-toggle="modal" 
                                    data-bs-target="#modalEvento" 
                                    data-jugador-id="{{ jugador.id }}"
                                    data-jugador-nombre="{{ jugador.nombre }}">
                                <i class="fas fa-plus"></i> A√±adir Puntos
                            </button>
                        </div>
                    </li>
                {% else %}
                    <li class="text-muted">Sin jugadores</li>
                {% endfor %}
            </ul>
        </div>
        <a href="{{ path('torneo', {'id': disputa.torneo.id}) }}" class="btn-volver-atras">
        ‚ùÆ Volver al Resumen
    </a>
    </div>
</div>
{{ include('/disputas/modal.html.twig') }}
{% endblock %}
{% block javascripts %}
{{ parent() }}
{% endblock %}